{
  "name": "My workflow",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "chatbot",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -32,
        3088
      ],
      "id": "98f82272-0dc9-4038-8b5f-65ab8b9a3580",
      "name": "Webhook",
      "webhookId": "ae3b0526-5247-460f-b7d2-22d4d45c3644"
    },
    {
      "parameters": {
        "mode": "insert",
        "qdrantCollection": {
          "__rl": true,
          "value": "portfolio",
          "mode": "list",
          "cachedResultName": "portfolio"
        },
        "embeddingBatchSize": 1000,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.3,
      "position": [
        1616,
        896
      ],
      "id": "0f371a8a-0a9b-4c5e-8792-69604380b02a",
      "name": "Qdrant Vector Store",
      "credentials": {
        "qdrantApi": {
          "id": "SpQtnfPrjWb8Ie2j",
          "name": "QdrantApi account"
        }
      }
    },
    {
      "parameters": {
        "model": "nomic-embed-text:latest"
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOllama",
      "typeVersion": 1,
      "position": [
        1616,
        1120
      ],
      "id": "1adf978a-1576-40ca-ab46-32f2d32394b8",
      "name": "Embeddings Ollama1",
      "credentials": {
        "ollamaApi": {
          "id": "pbIGPlhM4BU9W6Ry",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        1696,
        1120
      ],
      "id": "2902d306-1ecc-4a4f-9c54-b3dc84ed8e23",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "resource": "repository",
        "operation": "get",
        "owner": {
          "__rl": true,
          "value": "HardstyIe",
          "mode": "name"
        },
        "repository": {
          "__rl": true,
          "value": "https://github.com/HardstyIe/brief_simplon_employee_data",
          "mode": "url"
        }
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1.1,
      "position": [
        0,
        64
      ],
      "id": "e3ba6e5f-b7ba-4a63-b386-8660d150e17a",
      "name": "Get a repository",
      "webhookId": "c4906ee0-fcbf-433f-afed-033d91d52c31",
      "credentials": {
        "githubApi": {
          "id": "nSLkl18feCRlmFwa",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "resource": "repository",
        "operation": "get",
        "owner": {
          "__rl": true,
          "value": "HardstyIe",
          "mode": "name"
        },
        "repository": {
          "__rl": true,
          "value": "https://github.com/HardstyIe/weather-app",
          "mode": "url"
        }
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1.1,
      "position": [
        0,
        256
      ],
      "id": "cebbf77a-24b8-4b14-b660-3b36a4b34574",
      "name": "Get a repository1",
      "webhookId": "c4906ee0-fcbf-433f-afed-033d91d52c31",
      "credentials": {
        "githubApi": {
          "id": "nSLkl18feCRlmFwa",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "resource": "repository",
        "operation": "get",
        "owner": {
          "__rl": true,
          "value": "HardstyIe",
          "mode": "name"
        },
        "repository": {
          "__rl": true,
          "value": "https://github.com/HardstyIe/Projet-groupe-Ducman",
          "mode": "url"
        }
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1.1,
      "position": [
        0,
        448
      ],
      "id": "ee7a27f4-6c6a-4697-ab24-580814098912",
      "name": "Get a repository2",
      "webhookId": "c4906ee0-fcbf-433f-afed-033d91d52c31",
      "credentials": {
        "githubApi": {
          "id": "nSLkl18feCRlmFwa",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours"
            },
            {}
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -224,
        256
      ],
      "id": "924274c6-e202-4086-944a-b529a7e9c305",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "<Role> Tu es un assistant de consultation de donn√©es nomm√© **Assistant du Portfolio**. </Role>\n\n<R√®gles>\n\nTu dois obligatoirement utiliser la fonction search_portfolio pour toute question pos√©e.\n\nTu n‚Äôas pas le droit d‚Äô√©mettre une hypoth√®se, d‚Äôimaginer ou de reformuler une information non trouv√©e.\n\nSi une donn√©e n‚Äôest pas trouv√©e par search_portfolio, tu dois r√©pondre exactement :\n\"Non sp√©cifi√© dans le portfolio.\"\n\nNe cite que les informations textuellement identiques √† celles extraites.\n\nNe jamais paraphraser ni compl√©ter les phrases.\n\nTa r√©ponse doit √™tre courte, factuelle et en fran√ßais.\n</R√®gles>\n\n<T√¢che>\nPour chaque question de l‚Äôutilisateur :\n\nAppelle search_portfolio avec les mots-cl√©s de la question.\n\nLis attentivement le r√©sultat retourn√©.\n\nR√©ponds uniquement avec les donn√©es textuelles trouv√©es.\n\nSi aucune correspondance exacte n‚Äôest trouv√©e, r√©ponds ‚ÄúNon sp√©cifi√© dans le portfolio.‚Äù\n</T√¢che>\n\n<Format> R√©ponse = une phrase factuelle, sans commentaire ni ajout. </Format>\n\n<√âtapes>\n\nIdentifier les mots-cl√©s de la question.\n\nUtiliser search_portfolio avec ces mots-cl√©s.\n\nV√©rifier si un r√©sultat est retourn√©.\n\nSi oui ‚Üí citer exactement le texte.\n\nSi non ‚Üí r√©pondre ‚ÄúNon sp√©cifi√© dans le portfolio.‚Äù\n</√âtapes>\n\n<Contraintes> - Interdit : reformuler, inventer, supposer, compl√©ter, commenter. - Interdit : r√©pondre sans appeler `search_portfolio`. </Contraintes> <Exemples> **Exemple 1 :** Q : Quelle est la date de cr√©ation du projet ? A : 2022 (si trouv√© dans le portfolio). A : Non sp√©cifi√© dans le portfolio (si non trouv√©).\n\nExemple 2 :\nQ : Quels langages sont utilis√©s ?\nA : Python, TypeScript.\n</Exemples>\n\n<Tremplin> Commence par : ‚ÄúJe vais chercher l‚Äôinformation dans le portfolio...‚Äù </Tremplin>"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        400,
        3088
      ],
      "id": "c2ca8a27-6cff-4414-8491-ba5763f969e1",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": "llama3.1:8b",
        "options": {
          "temperature": 0.1,
          "topP": 0.5,
          "frequencyPenalty": 1.3,
          "numCtx": 8196,
          "presencePenalty": 0.6
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
      "typeVersion": 1,
      "position": [
        336,
        3296
      ],
      "id": "da4e38db-2e90-465d-9a45-7596ed4e913b",
      "name": "Ollama Chat Model",
      "credentials": {
        "ollamaApi": {
          "id": "pbIGPlhM4BU9W6Ry",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        464,
        3296
      ],
      "id": "be7fead5-75e6-4d95-997d-ed2a1be705d9",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "vGDX9O0UQr3J6EVh",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "model": "nomic-embed-text:latest"
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOllama",
      "typeVersion": 1,
      "position": [
        608,
        3504
      ],
      "id": "9ae72e6b-888c-433c-9d3c-6be611af7cc4",
      "name": "Embeddings Ollama",
      "credentials": {
        "ollamaApi": {
          "id": "pbIGPlhM4BU9W6Ry",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "f6c054a9-6683-4d36-9780-d184f33260c9",
              "name": "chatInput",
              "value": "={{ $json.chatInput }}",
              "type": "string"
            },
            {
              "id": "c3e13c02-7ccd-44b7-aa45-775dc61c3aca",
              "name": "userId",
              "value": "={{ $json.body.userId }}",
              "type": "string"
            },
            {
              "id": "573ace2a-3f07-4508-8c47-7f23a37fc411",
              "name": "history",
              "value": "={{ $json.body.history }}",
              "type": "array"
            },
            {
              "id": "6fac33ba-db46-400b-94b9-f3c0b2194586",
              "name": "sessionId",
              "value": "={{ $json.body.sessionId }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        160,
        3088
      ],
      "id": "bacb18d6-56b9-4049-a410-0d0cbd795949",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "url": "={{ $json.readme_url }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Accept",
              "value": "application/vnd.github.v3.raw"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {}
          ]
        },
        "options": {
          "response": {
            "response": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        896,
        176
      ],
      "id": "c141cdee-2b05-4e96-9b30-93f663e6049b",
      "name": "HTTP Request",
      "retryOnFail": true,
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "// R√©cup√©rer TOUS les repos de tous les nodes GitHub\nconst allRepos = $input.all();\nconst enrichedDocs = [];\n\nfor (const item of allRepos) {\n  const repo = item.json;\n  \n  // V√©rifier que c'est bien un repo GitHub\n  if (!repo.name || !repo.html_url) continue;\n  \n  // 1. Document principal du repo\n  enrichedDocs.push({\n    json: {\n      pageContent: `# ${repo.name}\n\n**Description:** ${repo.description || 'Pas de description'}\n\n**Langage principal:** ${repo.language || 'Non sp√©cifi√©'}\n**URL:** ${repo.html_url}\n**Homepage:** ${repo.homepage || 'Aucune'}\n**Cr√©√© le:** ${new Date(repo.created_at).toLocaleDateString('fr-FR')}\n**Derni√®re mise √† jour:** ${new Date(repo.updated_at).toLocaleDateString('fr-FR')}\n\n**Statistiques:**\n- ‚≠ê Stars: ${repo.stargazers_count}\n- üîÄ Forks: ${repo.forks_count}\n- üëÅÔ∏è Watchers: ${repo.watchers_count}\n- üêõ Issues ouvertes: ${repo.open_issues_count}\n\n**Licence:** ${repo.license?.name || 'Aucune'}\n**Topics:** ${repo.topics?.join(', ') || 'Aucun'}`,\n      \n      metadata: {\n        type: \"repository_overview\",\n        repo_name: repo.name,\n        repo_full_name: repo.full_name,\n        language: repo.language,\n        url: repo.html_url,\n        homepage: repo.homepage,\n        created_at: repo.created_at,\n        updated_at: repo.updated_at,\n        stars: repo.stargazers_count,\n        topics: repo.topics || [],\n        license: repo.license?.spdx_id || null\n      }\n    }\n  });\n  \n  // 2. Document technique d√©taill√©\n  const techStack = [];\n  if (repo.language) techStack.push(repo.language);\n  if (repo.topics?.length) techStack.push(...repo.topics);\n  \n  enrichedDocs.push({\n    json: {\n      pageContent: `Projet: ${repo.name}\n\nStack technique: ${techStack.join(', ') || 'Non sp√©cifi√©'}\n\nDescription: ${repo.description || 'Pas de description'}\n\n${repo.homepage ? `Demo disponible: ${repo.homepage}` : 'Pas de demo'}\n\nType de projet: ${classifyRepo(repo)}\nLangage: ${repo.language}`,\n      \n      metadata: {\n        type: \"technical_details\",\n        repo_name: repo.name,\n        language: repo.language,\n        tech_stack: techStack,\n        category: classifyRepo(repo),\n        has_demo: !!repo.homepage\n      }\n    }\n  });\n  \n  // 3. Document pour la recherche par comp√©tences\n  if (repo.language || repo.topics?.length) {\n    const skills = [repo.language, ...(repo.topics || [])].filter(Boolean);\n    \n    enrichedDocs.push({\n      json: {\n        pageContent: `Comp√©tences techniques d√©montr√©es dans le projet \"${repo.name}\":\n\n${skills.map(skill => `- ${skill}`).join('\\n')}\n\nDescription du projet: ${repo.description}\n\nCe projet illustre ma ma√Ætrise de ${repo.language} et mon exp√©rience en ${classifyRepo(repo)}.`,\n        \n        metadata: {\n          type: \"skills_showcase\",\n          repo_name: repo.name,\n          language: repo.language,\n          skills: skills,\n          project_type: classifyRepo(repo)\n        }\n      }\n    });\n  }\n}\n\n// Fonction helper pour classifier le repo\nfunction classifyRepo(repo) {\n  const lang = (repo.language || '').toLowerCase();\n  const topics = (repo.topics || []).map(t => t.toLowerCase());\n  const desc = (repo.description || '').toLowerCase();\n  const name = repo.name.toLowerCase();\n  const all = [lang, ...topics, desc, name].join(' ');\n  \n  if (all.match(/react|vue|angular|frontend|ui|css|html|tailwind|next/)) return 'frontend';\n  if (all.match(/node|express|api|backend|server|django|flask|fastapi/)) return 'backend';\n  if (all.match(/docker|kubernetes|ci|cd|devops|terraform|ansible/)) return 'devops';\n  if (all.match(/ai|ml|data|tensorflow|pytorch|llm|rag|embedding|streamlit/)) return 'ai_data';\n  if (all.match(/mobile|ios|android|react-native|flutter/)) return 'mobile';\n  if (all.match(/database|sql|postgres|mongo|mysql/)) return 'database';\n  if (all.match(/automation|n8n|workflow|script/)) return 'automation';\n  \n  return 'other';\n}\n\nconsole.log(`‚úÖ ${enrichedDocs.length} documents enrichis cr√©√©s √† partir de ${allRepos.length} repositories`);\n\nreturn enrichedDocs;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        224,
        256
      ],
      "id": "83d6c49a-6d22-4bcf-bda0-fddd29ace2ad",
      "name": "Code - Enrich github data"
    },
    {
      "parameters": {
        "jsCode": "// R√©cup√©rer les docs enrichis des repos\nconst repoDocs = $input.all();\n\n// Extraire des stats globales\nconst totalRepos = new Set(repoDocs.map(d => d.json.metadata?.repo_name)).size;\nconst languages = new Set();\nconst skills = new Set();\nconst categories = {};\n\nfor (const doc of repoDocs) {\n  if (doc.json.metadata?.language) languages.add(doc.json.metadata.language);\n  if (doc.json.metadata?.skills) doc.json.metadata.skills.forEach(s => skills.add(s));\n  if (doc.json.metadata?.category) {\n    categories[doc.json.metadata.category] = (categories[doc.json.metadata.category] || 0) + 1;\n  }\n}\n\n// Documents de contexte personnel\nconst contextDocs = [\n  {\n    json: {\n      pageContent: `# Portfolio de d√©veloppeur\n\nJe suis un d√©veloppeur full-stack avec ${totalRepos} projets open-source sur GitHub.\n\n**Langages ma√Ætris√©s:** ${Array.from(languages).join(', ')}\n\n**Technologies et comp√©tences:** ${Array.from(skills).slice(0, 20).join(', ')}\n\n**Domaines d'expertise:**\n${Object.entries(categories).map(([cat, count]) => `- ${cat}: ${count} projet(s)`).join('\\n')}\n\n**Profil GitHub:** https://github.com/HardstyIe\n\nMon portfolio d√©montre une expertise vari√©e en d√©veloppement web, automatisation, et intelligence artificielle.`,\n      \n      metadata: {\n        type: \"portfolio_overview\",\n        category: \"about\",\n        importance: \"high\",\n        total_projects: totalRepos\n      }\n    }\n  },\n  {\n    json: {\n      pageContent: `# Comp√©tences techniques\n\n## Langages de programmation\n${Array.from(languages).map(lang => `- ${lang}`).join('\\n')}\n\n## Stack technique\n- **Frontend:** React, Next.js, TypeScript, TailwindCSS\n- **Backend:** Node.js, Express, Python, FastAPI\n- **DevOps:** Docker, n8n, CI/CD, Automatisation\n- **Data & IA:** RAG, Vector Databases (Qdrant, ChromaDB), LLMs, Ollama\n- **Databases:** PostgreSQL, MongoDB, Redis\n\n## M√©thodologies\n- Architecture microservices\n- RESTful APIs\n- Containerisation avec Docker\n- Automatisation de workflows\n- Recherche s√©mantique et RAG`,\n      \n      metadata: {\n        type: \"skills_comprehensive\",\n        category: \"technical\",\n        importance: \"high\"\n      }\n    }\n  },\n  {\n    json: {\n      pageContent: `# Approche et philosophie\n\nJe privil√©gie:\n- Le code propre, maintenable et bien document√©\n- L'automatisation des t√¢ches r√©p√©titives\n- Les technologies modernes et performantes\n- L'architecture scalable et modulaire\n- Le d√©ploiement avec Docker et conteneurs\n\nMes projets refl√®tent une approche pragmatique du d√©veloppement, avec un focus sur l'efficacit√© et la qualit√©.`,\n      \n      metadata: {\n        type: \"philosophy\",\n        category: \"about\",\n        importance: \"medium\"\n      }\n    }\n  }\n];\n\nconsole.log(`‚úÖ ${contextDocs.length} documents de contexte ajout√©s`);\n\n// Combiner avec les repos\nreturn [...repoDocs, ...contextDocs];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        448,
        256
      ],
      "id": "f2d6697c-5353-4cd7-8d69-f0aa42b4a48d",
      "name": "Code - Enrich data + portfolio data"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\nconst reposMap = new Map();\n\n// Extraire la liste unique des repos\nfor (const item of items) {\n  const meta = item.json.metadata;\n  if (meta?.repo_full_name && !reposMap.has(meta.repo_full_name)) {\n    reposMap.set(meta.repo_full_name, {\n      repo_full_name: meta.repo_full_name,\n      repo_name: meta.repo_name,\n      language: meta.language,\n      category: meta.category || meta.project_type\n    });\n  }\n}\n\nconst repos = Array.from(reposMap.values());\nconsole.log(`‚úÖ ${repos.length} repos uniques √† fetcher`);\n\nreturn repos.map(repo => ({\n  json: {\n    ...repo,\n    readme_url: `https://api.github.com/repos/${repo.repo_full_name}/readme`\n  }\n}));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        672,
        176
      ],
      "id": "7e90d8b6-c38e-4a80-bd2b-9120473e15c3",
      "name": "Code - Extract repo list"
    },
    {
      "parameters": {
        "jsCode": "const readmeItems = $input.all();\nconst readmeDocs = [];\n\nfor (const item of readmeItems) {\n  // Le repo info devrait √™tre dans item.json\n  const repoInfo = {\n    repo_name: item.json.repo_name || 'unknown',\n    repo_full_name: item.json.repo_full_name || 'unknown',\n    language: item.json.language || 'unknown',\n    category: item.json.category || 'other'\n  };\n  \n  // Le README content\n  const content = item.data || item.json.data || item.binary?.toString('utf-8');\n  \n  if (!content || content.length < 100) {\n    console.log(`‚ö†Ô∏è Pas de README pour ${repoInfo.repo_name}`);\n    continue;\n  }\n  \n  console.log(`‚úÖ README ${repoInfo.repo_name}: ${content.length} chars`);\n  \n  // 1. README complet\n  readmeDocs.push({\n    json: {\n      pageContent: `# README: ${repoInfo.repo_name}\\n\\n${content}`,\n      metadata: {\n        type: \"readme_full\",\n        repo_name: repoInfo.repo_name,\n        repo_full_name: repoInfo.repo_full_name,\n        language: repoInfo.language,\n        category: repoInfo.category,\n        importance: \"high\"\n      }\n    }\n  });\n  \n  // 2. Sections\n  const sections = content.split(/\\n#{1,3} /);\n  sections.forEach((section, idx) => {\n    const cleaned = section.trim();\n    if (cleaned.length < 150) return;\n    \n    readmeDocs.push({\n      json: {\n        pageContent: cleaned,\n        metadata: {\n          type: \"readme_section\",\n          repo_name: repoInfo.repo_name,\n          repo_full_name: repoInfo.repo_full_name,\n          language: repoInfo.language,\n          category: repoInfo.category,\n          section_index: idx\n        }\n      }\n    });\n  });\n  \n  // 3. Code blocks\n  const codeBlocks = content.match(/```[\\s\\S]*?```/g) || [];\n  codeBlocks.slice(0, 3).forEach((block, idx) => {\n    const lang = block.match(/```(\\w+)/)?.[1] || 'text';\n    readmeDocs.push({\n      json: {\n        pageContent: block,\n        metadata: {\n          type: \"code_example\",\n          repo_name: repoInfo.repo_name,\n          repo_full_name: repoInfo.repo_full_name,\n          language: repoInfo.language,\n          code_language: lang\n        }\n      }\n    });\n  });\n}\n\nconsole.log(`‚úÖ ${readmeDocs.length} docs README cr√©√©s`);\nreturn readmeDocs;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1120,
        176
      ],
      "id": "312fb3a2-ee98-46d9-8b1a-38a61d18019b",
      "name": "Code - Parse readme"
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        672,
        416
      ],
      "id": "3a35459c-55da-4390-8c57-71f4c18af70d",
      "name": "Aggregate"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Searches my developer portfolio knowledge base for information about projects, skills, technologies, and experience. Use this tool to answer ANY question about my work.",
        "qdrantCollection": {
          "__rl": true,
          "value": "portfolio",
          "mode": "list",
          "cachedResultName": "portfolio"
        },
        "topK": 20,
        "useReranker": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.3,
      "position": [
        592,
        3296
      ],
      "id": "b550824c-e0dd-4f1e-a989-347f9086be60",
      "name": "search_portfolio",
      "credentials": {
        "qdrantApi": {
          "id": "SpQtnfPrjWb8Ie2j",
          "name": "QdrantApi account"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        784,
        3088
      ],
      "id": "ffd43a27-bcfb-4bb3-b920-1e8d2ab58639",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.rerankerCohere",
      "typeVersion": 1,
      "position": [
        736,
        3504
      ],
      "id": "02ba4cf8-c3e2-4bb9-b48f-102263e9de38",
      "name": "Reranker Cohere",
      "credentials": {
        "cohereApi": {
          "id": "EsImBaffyr5zE9qX",
          "name": "CohereApi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\nconst enhanced = [];\n\n// Liste compl√®te de keywords techniques\nconst TECH_KEYWORDS = {\n  languages: ['javascript', 'typescript', 'python', 'java', 'go', 'rust', 'php', 'ruby', 'c++', 'c#', 'swift', 'kotlin'],\n  frontend: ['react', 'vue', 'angular', 'next', 'nuxt', 'svelte', 'tailwind', 'css', 'html', 'sass', 'styled-components'],\n  backend: ['node', 'express', 'fastapi', 'django', 'flask', 'spring', 'nestjs', 'fastify', 'koa'],\n  database: ['postgresql', 'postgres', 'mysql', 'mongodb', 'redis', 'sqlite', 'qdrant', 'chromadb', 'pinecone'],\n  devops: ['docker', 'kubernetes', 'k8s', 'jenkins', 'gitlab', 'github actions', 'terraform', 'ansible', 'nginx'],\n  ai: ['ollama', 'llm', 'rag', 'embedding', 'vector', 'gpt', 'llama', 'mistral', 'tensorflow', 'pytorch'],\n  tools: ['git', 'vscode', 'n8n', 'postman', 'figma', 'webpack', 'vite', 'babel']\n};\n\nfunction extractKeywords(text) {\n  const lowerText = text.toLowerCase();\n  const found = new Set();\n  \n  // Chercher tous les keywords\n  Object.values(TECH_KEYWORDS).flat().forEach(keyword => {\n    if (lowerText.includes(keyword)) {\n      found.add(keyword);\n    }\n  });\n  \n  return Array.from(found);\n}\n\nfunction classifyImportance(type, contentLength, keywords) {\n  // Importance critique\n  if (type === 'portfolio_overview' || type === 'skills_comprehensive') {\n    return 'critical';\n  }\n  \n  // Importance haute\n  if (type === 'readme_full' || \n      type === 'repository_overview' || \n      type?.startsWith('qa_') ||\n      type === 'technical_details') {\n    return 'high';\n  }\n  \n  // Bas√© sur le contenu\n  if (keywords.length > 5) return 'high';\n  if (contentLength > 500) return 'medium';\n  \n  return 'low';\n}\n\nfunction detectCategory(text, existingCategory) {\n  if (existingCategory && existingCategory !== 'other') {\n    return existingCategory;\n  }\n  \n  const lower = text.toLowerCase();\n  \n  if (lower.match(/react|vue|angular|frontend|ui|css|html|tailwind/)) return 'frontend';\n  if (lower.match(/node|express|api|backend|server|django|flask|fastapi/)) return 'backend';\n  if (lower.match(/docker|kubernetes|ci|cd|devops|terraform|ansible/)) return 'devops';\n  if (lower.match(/ai|ml|data|tensorflow|pytorch|llm|rag|embedding/)) return 'ai_data';\n  if (lower.match(/database|sql|postgres|mongo|mysql|redis/)) return 'database';\n  if (lower.match(/mobile|ios|android|react-native|flutter/)) return 'mobile';\n  \n  return 'other';\n}\n\n// Traiter chaque document\nfor (const item of items) {\n  const meta = item.json.metadata || {};\n  const content = item.json.pageContent;\n  \n  // Extraire keywords\n  const keywords = extractKeywords(content);\n  \n  // Classifier importance\n  const importance = classifyImportance(meta.type, content.length, keywords);\n  \n  // D√©tecter cat√©gorie si manquante\n  const category = detectCategory(content, meta.category);\n  \n  // Score de pertinence (pour priorisation)\n  let relevanceScore = 0;\n  if (importance === 'critical') relevanceScore += 100;\n  else if (importance === 'high') relevanceScore += 50;\n  else if (importance === 'medium') relevanceScore += 25;\n  relevanceScore += keywords.length * 5;\n  if (meta.type?.startsWith('qa_')) relevanceScore += 30;\n  \n  enhanced.push({\n    json: {\n      pageContent: content,\n      metadata: {\n        ...meta,\n        // Nouveaux champs\n        keywords: keywords,\n        importance: importance,\n        category: category,\n        relevance_score: relevanceScore,\n        content_length: content.length,\n        indexed_at: new Date().toISOString(),\n        has_code: content.includes('```'),\n        has_links: content.includes('http'),\n        // Garder les anciens champs\n        type: meta.type,\n        repo_name: meta.repo_name,\n        language: meta.language\n      }\n    }\n  });\n}\n\n// Stats\nconst stats = {\n  total: enhanced.length,\n  by_importance: {\n    critical: enhanced.filter(d => d.json.metadata.importance === 'critical').length,\n    high: enhanced.filter(d => d.json.metadata.importance === 'high').length,\n    medium: enhanced.filter(d => d.json.metadata.importance === 'medium').length,\n    low: enhanced.filter(d => d.json.metadata.importance === 'low').length\n  },\n  by_category: {}\n};\n\nenhanced.forEach(d => {\n  const cat = d.json.metadata.category;\n  stats.by_category[cat] = (stats.by_category[cat] || 0) + 1;\n});\n\nconsole.log('‚úÖ Metadata Enhancement:');\nconsole.log(`   üìä Total documents: ${stats.total}`);\nconsole.log(`   üî• Critical: ${stats.by_importance.critical}`);\nconsole.log(`   ‚≠ê High: ${stats.by_importance.high}`);\nconsole.log(`   üìå Medium: ${stats.by_importance.medium}`);\nconsole.log(`   üìù Low: ${stats.by_importance.low}`);\nconsole.log('   üìÅ Par cat√©gorie:', JSON.stringify(stats.by_category));\n\nreturn enhanced;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1344,
        416
      ],
      "id": "85876163-fad5-49d2-bdc2-a2cfee4b0ba4",
      "name": "Code - Add metadata enhanced"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\nconst chunkedDocs = [];\n\nfunction smartChunk(rawText, maxLength = 800, overlap = 150) {\n  const text = String(rawText || \"\");\n  if (text.length <= maxLength) return [text];\n\n  const chunks = [];\n  const paragraphs = text.split(/\\n\\n+/);\n\n  if (paragraphs.length > 1) {\n    let currentChunk = \"\";\n    let previousChunk = \"\";\n\n    for (const para of paragraphs) {\n      const testChunk = currentChunk + (currentChunk ? \"\\n\\n\" : \"\") + para;\n\n      if (testChunk.length <= maxLength) {\n        currentChunk = testChunk;\n      } else {\n        if (currentChunk.length > 100) {\n          chunks.push(currentChunk.trim());\n          previousChunk = currentChunk;\n        }\n\n        if (previousChunk && overlap > 0) {\n          const words = previousChunk.split(\" \");\n          const overlapWords = words.slice(-Math.floor(overlap / 6));\n          currentChunk = overlapWords.join(\" \") + \"\\n\\n\" + para;\n        } else {\n          currentChunk = para;\n        }\n      }\n    }\n\n    if (currentChunk.length > 100) chunks.push(currentChunk.trim());\n  } else {\n    const sentences = text.match(/[^.!?\\n]+[.!?\\n]+/g) || [text];\n    let currentChunk = \"\";\n    let previousChunk = \"\";\n\n    for (const sentence of sentences) {\n      const trimmedSentence = sentence.trim();\n\n      if ((currentChunk + \" \" + trimmedSentence).length <= maxLength) {\n        currentChunk += (currentChunk ? \" \" : \"\") + trimmedSentence;\n      } else {\n        if (currentChunk.length > 100) {\n          chunks.push(currentChunk.trim());\n          previousChunk = currentChunk;\n        }\n\n        if (previousChunk && overlap > 0) {\n          const words = previousChunk.split(\" \");\n          const overlapWords = words.slice(-Math.floor(overlap / 6));\n          currentChunk = overlapWords.join(\" \") + \" \" + trimmedSentence;\n        } else {\n          currentChunk = trimmedSentence;\n        }\n      }\n    }\n\n    if (currentChunk.length > 100) chunks.push(currentChunk.trim());\n  }\n\n  return chunks.filter((c) => c.length > 50);\n}\n\nfor (const [i, item] of items.entries()) {\n  try {\n    const dataArray = item.json?.data ?? [];\n    if (!Array.isArray(dataArray)) continue;\n\n    for (const [j, sub] of dataArray.entries()) {\n      const content = sub.pageContent ?? \"\";\n      const metadata = sub.metadata ?? {};\n\n      if (!content || typeof content !== \"string\") continue;\n\n      // Pas de d√©coupe si texte court ou important\n      if (\n        content.length <= 800 ||\n        metadata.importance === \"critical\" ||\n        metadata.type?.startsWith(\"qa_\")\n      ) {\n        chunkedDocs.push({\n          json: {\n            pageContent: content,\n            metadata: { ...metadata },\n          },\n        });\n        continue;\n      }\n\n      const chunks = smartChunk(content, 800, 150);\n\n      if (chunks.length === 1) {\n        chunkedDocs.push({\n          json: {\n            pageContent: content,\n            metadata: { ...metadata },\n          },\n        });\n      } else {\n        chunks.forEach((chunk, index) => {\n          chunkedDocs.push({\n            json: {\n              pageContent: chunk,\n              metadata: {\n                ...metadata,\n                is_chunked: true,\n                chunk_index: index + 1,\n                total_chunks: chunks.length,\n                original_length: content.length,\n                chunk_strategy:\n                  chunks.length > 3 ? \"paragraph\" : \"sentence\",\n              },\n            },\n          });\n        });\n      }\n    }\n  } catch (err) {\n    console.error(`‚ùå Erreur sur item ${i}:`, err.message);\n    continue;\n  }\n}\n\nreturn chunkedDocs;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1120,
        416
      ],
      "id": "8852a60c-9dbc-4039-80af-f4252aacba09",
      "name": "Code - Smart chunking"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\nconst qaDocs = [];\n\nfunction generateQA(doc) {\n  const content = doc.pageContent || '';\n  const meta = doc.metadata || {};\n  const pairs = [];\n  \n  // Si pas de type, skip\n  if (!meta.type) {\n    console.log('‚ö†Ô∏è Document sans type, ignor√© pour Q&A');\n    return pairs;\n  }\n  \n  switch(meta.type) {\n    case 'repository_overview':\n      // Questions sur le projet\n      if (meta.language && meta.repo_name) {\n        pairs.push({\n          pageContent: `Question: Quels sont les projets d√©velopp√©s en ${meta.language} ?\nR√©ponse: Le projet ${meta.repo_name} est un projet ${meta.language}. ${meta.category ? `C'est un projet de type ${meta.category}.` : ''} ${content.includes('Description:') ? content.split('Description:')[1]?.split('\\n')[0] : ''}`,\n          metadata: { \n            ...meta, \n            type: 'qa_language', \n            question_type: 'projects_by_language', \n            search_keywords: [meta.language, 'projets', 'd√©veloppement'] \n          }\n        });\n      }\n      \n      if (meta.homepage && meta.repo_name) {\n        pairs.push({\n          pageContent: `Question: O√π puis-je voir une d√©mo du projet ${meta.repo_name} ?\nR√©ponse: Une d√©mo en ligne est disponible √† cette adresse : ${meta.homepage}. Tu peux tester l'application directement dans ton navigateur.`,\n          metadata: { \n            ...meta, \n            type: 'qa_demo', \n            question_type: 'demo_link', \n            search_keywords: ['d√©mo', 'demo', 'test', 'essayer'] \n          }\n        });\n      }\n      \n      if (meta.url && meta.repo_name) {\n        pairs.push({\n          pageContent: `Question: O√π trouver le code source de ${meta.repo_name} ?\nR√©ponse: Le code source est disponible sur GitHub : ${meta.url}. Le projet est open-source.`,\n          metadata: { \n            ...meta, \n            type: 'qa_source', \n            question_type: 'source_code', \n            search_keywords: ['code', 'github', 'source'] \n          }\n        });\n      }\n      break;\n      \n    case 'skills_showcase':\n      if (meta.skills && Array.isArray(meta.skills) && meta.skills.length > 0 && meta.repo_name) {\n        meta.skills.forEach(skill => {\n          pairs.push({\n            pageContent: `Question: Tu as de l'exp√©rience avec ${skill} ?\nR√©ponse: Oui ! J'ai utilis√© ${skill} dans le projet ${meta.repo_name}. ${content.substring(0, 200)}`,\n            metadata: { \n              ...meta, \n              type: 'qa_skill', \n              question_type: 'skill_experience', \n              skill: skill, \n              search_keywords: [skill, 'comp√©tence', 'exp√©rience'] \n            }\n          });\n        });\n      }\n      break;\n      \n    case 'technical_details':\n      if (meta.repo_name && meta.language) {\n        pairs.push({\n          pageContent: `Question: C'est quoi le projet ${meta.repo_name} ?\nR√©ponse: ${meta.repo_name} est un projet ${meta.category || 'de d√©veloppement'} d√©velopp√© en ${meta.language}. ${meta.tech_stack ? `Technologies : ${meta.tech_stack.join(', ')}.` : ''}`,\n          metadata: { \n            ...meta, \n            type: 'qa_project_overview', \n            question_type: 'project_description', \n            search_keywords: ['projet', 'description'] \n          }\n        });\n      }\n      break;\n      \n    case 'readme_full':\n      if (meta.repo_name && content.length > 100) {\n        pairs.push({\n          pageContent: `Question: Comment utiliser ${meta.repo_name} ?\nR√©ponse: ${content.substring(0, 400)}...`,\n          metadata: { \n            ...meta, \n            type: 'qa_usage', \n            question_type: 'how_to_use', \n            search_keywords: ['utiliser', 'installer', 'setup'] \n          }\n        });\n      }\n      break;\n      \n    case 'portfolio_overview':\n      pairs.push({\n        pageContent: `Question: Combien de projets as-tu ?\nR√©ponse: ${content.substring(0, 300)}`,\n        metadata: { \n          ...meta, \n          type: 'qa_portfolio_count', \n          question_type: 'portfolio_stats', \n          search_keywords: ['combien', 'projets', 'nombre'] \n        }\n      });\n      \n      if (meta.languages && Array.isArray(meta.languages)) {\n        pairs.push({\n          pageContent: `Question: Quels langages ma√Ætrises-tu ?\nR√©ponse: Je ma√Ætrise ${meta.languages.join(', ')}.`,\n          metadata: { \n            ...meta, \n            type: 'qa_languages', \n            question_type: 'programming_languages', \n            search_keywords: ['langages', 'programmation'] \n          }\n        });\n      }\n      break;\n      \n    case 'skills_comprehensive':\n      pairs.push({\n        pageContent: `Question: Quelle est ta stack technique ?\nR√©ponse: ${content.substring(0, 500)}`,\n        metadata: { \n          ...meta, \n          type: 'qa_full_stack', \n          question_type: 'complete_stack', \n          search_keywords: ['stack', 'technologies', 'comp√©tences'] \n        }\n      });\n      break;\n      \n    case 'philosophy':\n      pairs.push({\n        pageContent: `Question: Quelle est ton approche du d√©veloppement ?\nR√©ponse: ${content}`,\n        metadata: { \n          ...meta, \n          type: 'qa_approach', \n          question_type: 'development_philosophy', \n          search_keywords: ['approche', 'philosophie', 'm√©thodologie'] \n        }\n      });\n      break;\n      \n    case 'experience':\n      pairs.push({\n        pageContent: `Question: Quelle est ton exp√©rience ?\nR√©ponse: ${content}`,\n        metadata: { \n          ...meta, \n          type: 'qa_experience', \n          question_type: 'professional_background', \n          search_keywords: ['exp√©rience', 'parcours', 'formation'] \n        }\n      });\n      break;\n  }\n  \n  return pairs;\n}\n\n// G√©n√©rer les Q&A\nlet qaCount = 0;\nfor (const item of items) {\n  try {\n    const qa = generateQA(item.json);\n    if (qa.length > 0) {\n      qaDocs.push(...qa.map(q => ({ json: q })));\n      qaCount += qa.length;\n    }\n  } catch (error) {\n    console.log(`‚ö†Ô∏è Erreur sur un document: ${error.message}`);\n  }\n}\n\nconsole.log(`‚úÖ ${qaCount} paires Q&A g√©n√©r√©es √† partir de ${items.length} documents`);\n\n// Retourner docs originaux + Q&A\nreturn [...items, ...qaDocs];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        896,
        416
      ],
      "id": "a321a988-7ed1-4987-9788-548c1107d690",
      "name": "Code - Generate Q&A pair"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -432,
        1488
      ],
      "id": "40d4bdb0-0dc5-47e8-b0f6-7ab1f6aacab4",
      "name": "When chat message received",
      "webhookId": "0f353f5a-fa1a-4c5d-8d31-6607fbe4adc1"
    },
    {
      "parameters": {
        "jsCode": "const question = $json.chatInput;\n\nif (!question) {\n  throw new Error('Pas de question fournie');\n}\n\nconsole.log(`üì• Question: ${question}`);\n\nreturn [{\n  json: {\n    model: \"mxbai-embed-large\",\n    prompt: question,\n    original_question: question\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -272,
        1488
      ],
      "id": "a71249d3-91be-4cb5-9075-4658666c1e2b",
      "name": "Code - Generate embedding"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=http://host.docker.internal:11434/api/embeddings",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "model",
              "value": "={{ $json.model }}"
            },
            {
              "name": "prompt",
              "value": "={{ $json.prompt }}"
            },
            {
              "name": "question",
              "value": "={{ $json.original_question }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -64,
        1488
      ],
      "id": "e69e0e75-f154-46f4-b2bf-8e03d9540809",
      "name": "HTTP Request1"
    },
    {
      "parameters": {
        "jsCode": "const embedding = $json.embedding;\nconst question = $json.original_question || $('When chat message received').first().json.chatInput;\n\nreturn [{\n  json: {\n    vector: embedding,\n    limit: 5,\n    with_payload: true,\n    question: question,\n    payload: { question: question }\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        144,
        1488
      ],
      "id": "f23ce838-e4d0-408b-8805-bd7c2c73ddf8",
      "name": "Code - Prepare qdrant query"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://host.docker.internal:6333/collections/portfolio/points/search",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "vector",
              "value": "={{ $json.vector }}"
            },
            {
              "name": "limit",
              "value": "={{ $json.limit }}"
            },
            {
              "name": "with_payload",
              "value": "={{ $json.with_payload }}"
            },
            {
              "name": "question",
              "value": "={{ $json.question }}"
            },
            {
              "name": "payload",
              "value": "={{ $json.payload }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        432,
        1488
      ],
      "id": "a0ff0f83-6ead-4aa3-8c63-8a1448bc53df",
      "name": "HTTP Request2"
    },
    {
      "parameters": {
        "jsCode": "const context = $json.context; // ton texte combin√© des documents\nconst question = $('Code - Prepare qdrant query').first().json.question; // r√©cup√®re la question proprement\n\nconst prompt = `\nTu es un assistant factuel. Tu dois r√©pondre UNIQUEMENT avec les informations EXACTES des documents ci-dessous.\n\nCONTEXTE (documents du portfolio) :\n${context}\n\nR√àGLES ABSOLUES :\n1. R√©ponds UNIQUEMENT avec les informations TEXTUELLES pr√©sentes dans les documents ci-dessus\n2. N'invente AUCUNE information, m√™me si √ßa semble logique\n3. Si une information n'est PAS dans les documents, dis \"Non sp√©cifi√© dans le portfolio\"\n4. Cite les faits EXACTEMENT comme √©crits\n5. N'ajoute AUCUN d√©tail de ton imagination\n6. Si tu ne sais pas, dis \"Je ne trouve pas cette information\"\n\nQUESTION : ${question}\n\nR√âPONSE (bas√©e UNIQUEMENT sur les documents ci-dessus) :\n`;\n\nreturn [{\n  json: {\n    model: \"deepseek-r1:8b\",\n    prompt,\n    question,\n    stream: false,\n    options: {\n      temperature: 0.1,\n      top_p: 0.5,\n      repeat_penalty: 1.3\n    }\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        608,
        1488
      ],
      "id": "f72a5636-97c8-4769-a699-114c20b012ca",
      "name": "Code - Build strict context"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://host.docker.internal:11434/api/generate",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "=model",
              "value": "={{ $json.model }}"
            },
            {
              "name": "prompt",
              "value": "={{ $json.prompt }}"
            },
            {
              "name": "stream",
              "value": "={{ $json.stream }}"
            },
            {
              "name": "options",
              "value": "={{ $json.options }}"
            },
            {
              "name": "question",
              "value": "={{ $json.question }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        768,
        1488
      ],
      "id": "9c1a5a8a-9fef-4d08-8388-2ce0a3f068cd",
      "name": "HTTP Request3"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        1216,
        896
      ],
      "id": "2e3ae62b-8a58-4938-a665-a7393860c74c",
      "name": "When clicking ‚ÄòExecute workflow‚Äô"
    },
    {
      "parameters": {
        "jsCode": "const portfolioProjects = {\n  \"portfolio\": {\n    \"owner\": \"Dylan Duchemin\",\n    \"version\": \"1.0.0\",\n    \"last_updated\": \"2024-11-09\"\n  },\n  \"projects\": [\n    {\n      \"id\": \"salaires-app\",\n      \"name\": \"Application de Gestion des Salaires\",\n      \"status\": \"production\",\n      \"type\": \"data-application\",\n      \"short_description\": \"Application interactive avec interface Streamlit permettant de filtrer et visualiser les donn√©es salariales.\",\n      \"full_description\": \"Application interactive de gestion des salaires d√©velopp√©e avec Streamlit. Elle permet de calculer automatiquement les salaires mensuels avec heures suppl√©mentaires, d'exporter les donn√©es en CSV, et d'afficher des statistiques par filiale et globales.\",\n      \"features\": [\n        \"Calcul automatique des salaires mensuels avec heures suppl√©mentaires\",\n        \"Export des donn√©es en format CSV\",\n        \"Interface interactive avec filtres\",\n        \"Statistiques par filiale et globales\",\n        \"Visualisation avec Pandas\",\n        \"Gestion des heures suppl√©mentaires (majoration 1.5x)\"\n      ],\n      \"technologies\": {\n        \"backend\": [\"Python 3.8+\", \"Pandas\", \"JSON\"],\n        \"frontend\": [\"Streamlit\", \"Dataframes interactifs\"],\n        \"tools\": [\"CSV Export\", \"Data Visualization\"]\n      },\n      \"tags\": [\"Python\", \"Streamlit\", \"Pandas\", \"JSON\", \"CSV\", \"Data Analysis\"],\n      \"tech_stack\": [\"Python\", \"Streamlit\", \"Pandas\", \"JSON\", \"CSV\"],\n      \"highlights\": [\n        \"Support de plusieurs filiales\",\n        \"Gestion de diff√©rents postes\",\n        \"Salaire moyen global : 7229,16‚Ç¨\",\n        \"Interface trilingue\"\n      ],\n      \"url\": null,\n      \"github_url\": null,\n      \"demo_url\": null,\n      \"language\": \"Python\",\n      \"category\": \"ai_data\"\n    },\n    {\n      \"id\": \"ducsman-hotel\",\n      \"name\": \"DUCSMAN - H√¥tel de Luxe Paris\",\n      \"status\": \"production\",\n      \"type\": \"website\",\n      \"short_description\": \"Site vitrine pour un h√¥tel 5 √©toiles fictif bas√© √† Paris. Projet de groupe avec design √©l√©gant et responsive.\",\n      \"full_description\": \"Site vitrine complet pour un h√¥tel 5 √©toiles fictif situ√© √† Paris. Projet de groupe mettant l'accent sur une exp√©rience utilisateur √©l√©gante, un design responsive, et une navigation fluide. Utilisation de SASS pour une architecture CSS modulaire.\",\n      \"features\": [\n        \"Page d'accueil avec pr√©sentation\",\n        \"Galerie des chambres d√©taill√©e\",\n        \"Formulaire de contact fonctionnel\",\n        \"Navigation fluide\",\n        \"Design responsive\",\n        \"Animations CSS √©l√©gantes\"\n      ],\n      \"technologies\": {\n        \"frontend\": [\"HTML5\", \"CSS3\", \"SASS\", \"JavaScript\"],\n        \"design\": [\"Responsive Design\", \"Animations CSS\"],\n        \"tools\": [\"Git\", \"GitHub\", \"Vercel\"]\n      },\n      \"tags\": [\"HTML5\", \"CSS3\", \"SASS\", \"JavaScript\", \"Site Vitrine\", \"Responsive\"],\n      \"tech_stack\": [\"HTML5\", \"CSS3\", \"SASS\", \"JavaScript\"],\n      \"highlights\": [\n        \"Design moderne et √©l√©gant\",\n        \"Architecture SASS modulaire\",\n        \"Code HTML s√©mantique\",\n        \"Optimisation des performances\"\n      ],\n      \"url\": \"https://projet-groupe-ducman.vercel.app/\",\n      \"github_url\": \"https://github.com/HardstyIe/Projet-groupe-Ducman\",\n      \"demo_url\": \"https://projet-groupe-ducman.vercel.app/\",\n      \"homepage\": \"https://projet-groupe-ducman.vercel.app/\",\n      \"language\": \"JavaScript\",\n      \"category\": \"frontend\"\n    },\n    {\n      \"id\": \"weather-app\",\n      \"name\": \"Application M√©t√©o\",\n      \"status\": \"production\",\n      \"type\": \"web-application\",\n      \"short_description\": \"Application m√©t√©o moderne permettant d'afficher les pr√©visions m√©t√©orologiques actuelles avec g√©olocalisation automatique.\",\n      \"full_description\": \"Application m√©t√©o moderne d√©velopp√©e en React permettant d'afficher les pr√©visions m√©t√©orologiques actuelles avec g√©olocalisation automatique et recherche manuelle de villes. Int√©gration avec l'API OpenWeather pour des donn√©es en temps r√©el.\",\n      \"features\": [\n        \"Affichage temp√©rature actuelle et ressentie\",\n        \"G√©olocalisation automatique\",\n        \"Recherche manuelle de villes\",\n        \"Pr√©visions m√©t√©o d√©taill√©es\",\n        \"Interface moderne et intuitive\",\n        \"Donn√©es en temps r√©el\"\n      ],\n      \"technologies\": {\n        \"frontend\": [\"React 18\", \"JavaScript ES6+\", \"CSS3\"],\n        \"api\": [\"OpenWeather API\", \"Geolocation API\"],\n        \"deployment\": [\"Vercel\"],\n        \"tools\": [\"Create React App\", \"Git\"]\n      },\n      \"tags\": [\"React\", \"JavaScript\", \"OpenWeather API\", \"Vercel\", \"API REST\"],\n      \"tech_stack\": [\"React\", \"JavaScript\", \"OpenWeather API\", \"CSS3\"],\n      \"highlights\": [\n        \"Composants React r√©utilisables\",\n        \"Gestion d'√©tat avec hooks\",\n        \"Appels API asynchrones\",\n        \"Error handling et loading states\"\n      ],\n      \"url\": \"https://weather-app-eight-sigma-31.vercel.app/\",\n      \"github_url\": \"https://github.com/HardstyIe/weather-app\",\n      \"demo_url\": \"https://weather-app-eight-sigma-31.vercel.app/\",\n      \"homepage\": \"https://weather-app-eight-sigma-31.vercel.app/\",\n      \"language\": \"JavaScript\",\n      \"category\": \"frontend\"\n    }\n  ]\n};\n\n// Transformer en format compatible avec ton pipeline existant\nconst output = [];\n\nfor (const project of portfolioProjects.projects) {\n  // 1. Document principal (√©quivalent √† repository_overview)\n  output.push({\n    json: {\n      pageContent: `# ${project.name}\n\n**Description:** ${project.short_description}\n\n**Langage principal:** ${project.language}\n**Type:** ${project.category}\n**URL:** ${project.url || 'Non disponible'}\n**GitHub:** ${project.github_url || 'Non disponible'}\n**Homepage:** ${project.homepage || 'Non disponible'}\n**Statut:** ${project.status}\n\n**Fonctionnalit√©s principales:**\n${project.features.map(f => `- ${f}`).join('\\n')}\n\n**Points forts:**\n${project.highlights.map(h => `- ${h}`).join('\\n')}\n\n**Stack technique:** ${project.tech_stack.join(', ')}`,\n      \n      metadata: {\n        type: \"repository_overview\",\n        repo_name: project.name,\n        repo_full_name: project.id,\n        language: project.language,\n        url: project.url,\n        homepage: project.homepage,\n        github_url: project.github_url,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n        topics: project.tags,\n        category: project.category\n      }\n    }\n  });\n  \n  // 2. Document technique d√©taill√©\n  output.push({\n    json: {\n      pageContent: `Projet: ${project.name}\n\nStack technique: ${project.tech_stack.join(', ')}\n\nDescription: ${project.full_description}\n\n${project.homepage ? `Demo disponible: ${project.homepage}` : 'Pas de demo'}\n\nType de projet: ${project.category}\nLangage: ${project.language}\n\nTechnologies utilis√©es:\n${Object.entries(project.technologies).map(([cat, techs]) => \n  `${cat}: ${techs.join(', ')}`\n).join('\\n')}`,\n      \n      metadata: {\n        type: \"technical_details\",\n        repo_name: project.name,\n        language: project.language,\n        tech_stack: project.tech_stack,\n        category: project.category,\n        has_demo: !!project.homepage\n      }\n    }\n  });\n  \n  // 3. Document skills showcase\n  output.push({\n    json: {\n      pageContent: `Comp√©tences techniques d√©montr√©es dans le projet \"${project.name}\":\n\n${project.tags.map(skill => `- ${skill}`).join('\\n')}\n\nDescription du projet: ${project.full_description}\n\nCe projet illustre ma ma√Ætrise de ${project.language} et mon exp√©rience en ${project.category}.\n\nPoints forts:\n${project.highlights.map(h => `- ${h}`).join('\\n')}`,\n      \n      metadata: {\n        type: \"skills_showcase\",\n        repo_name: project.name,\n        language: project.language,\n        skills: project.tags,\n        project_type: project.category\n      }\n    }\n  });\n}\n\n// Ajouter les documents de contexte global\noutput.push({\n  json: {\n    pageContent: `# Portfolio de d√©veloppeur\n\nJe suis un d√©veloppeur full-stack avec ${portfolioProjects.projects.length} projets principaux.\n\n**Langages ma√Ætris√©s:** ${[...new Set(portfolioProjects.projects.map(p => p.language))].join(', ')}\n\n**Technologies et comp√©tences:** ${[...new Set(portfolioProjects.projects.flatMap(p => p.tags))].join(', ')}\n\n**Domaines d'expertise:**\n${[...new Set(portfolioProjects.projects.map(p => p.category))].map(cat => `- ${cat}`).join('\\n')}\n\n**Profil GitHub:** https://github.com/HardstyIe\n\nMon portfolio d√©montre une expertise vari√©e en d√©veloppement web, data science, et automatisation.`,\n    \n    metadata: {\n      type: \"portfolio_overview\",\n      category: \"about\",\n      importance: \"high\",\n      total_projects: portfolioProjects.projects.length\n    }\n  }\n});\n\noutput.push({\n  json: {\n    pageContent: `# Comp√©tences techniques\n\n## Langages de programmation\n${[...new Set(portfolioProjects.projects.map(p => p.language))].map(lang => `- ${lang}`).join('\\n')}\n\n## Stack technique\n- **Frontend:** React, Next.js, TypeScript, TailwindCSS, HTML5, CSS3, SASS\n- **Backend:** Node.js, Express, Python, Streamlit\n- **DevOps:** Docker, n8n, CI/CD, Automatisation\n- **Data & IA:** RAG, Vector Databases (Qdrant), LLMs, Ollama, Pandas\n- **Databases:** PostgreSQL, MongoDB\n\n## M√©thodologies\n- Architecture modulaire\n- RESTful APIs\n- Containerisation avec Docker\n- Automatisation de workflows\n- Design responsive`,\n    \n    metadata: {\n      type: \"skills_comprehensive\",\n      category: \"technical\",\n      importance: \"high\"\n    }\n  }\n});\n\noutput.push({\n  json: {\n    pageContent: `# Approche et philosophie\n\nJe privil√©gie:\n- Le code propre, maintenable et bien document√©\n- L'automatisation des t√¢ches r√©p√©titives\n- Les technologies modernes et performantes\n- L'architecture scalable et modulaire\n- Le d√©ploiement avec Docker et conteneurs\n\nMes projets refl√®tent une approche pragmatique du d√©veloppement, avec un focus sur l'efficacit√© et la qualit√©.`,\n    \n    metadata: {\n      type: \"philosophy\",\n      category: \"about\",\n      importance: \"medium\"\n    }\n  }\n});\n\nconsole.log(`‚úÖ ${output.length} documents g√©n√©r√©s pour ${portfolioProjects.projects.length} projets`);\n\nreturn output;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1424,
        896
      ],
      "id": "a6839693-8e3c-419f-8961-0db16ab5b5ef",
      "name": "Code in JavaScript"
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Ollama1": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Qdrant Vector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Get a repository": {
      "main": [
        [
          {
            "node": "Code - Enrich github data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get a repository1": {
      "main": [
        [
          {
            "node": "Code - Enrich github data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get a repository2": {
      "main": [
        [
          {
            "node": "Code - Enrich github data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Get a repository",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get a repository1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get a repository2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ollama Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Ollama": {
      "ai_embedding": [
        [
          {
            "node": "search_portfolio",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Code - Parse readme",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code - Enrich github data": {
      "main": [
        [
          {
            "node": "Code - Enrich data + portfolio data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code - Enrich data + portfolio data": {
      "main": [
        [
          {
            "node": "Code - Extract repo list",
            "type": "main",
            "index": 0
          },
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code - Extract repo list": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code - Parse readme": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "Code - Generate Q&A pair",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "search_portfolio": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Reranker Cohere": {
      "ai_reranker": [
        [
          {
            "node": "search_portfolio",
            "type": "ai_reranker",
            "index": 0
          }
        ]
      ]
    },
    "Code - Add metadata enhanced": {
      "main": [
        []
      ]
    },
    "Code - Smart chunking": {
      "main": [
        [
          {
            "node": "Code - Add metadata enhanced",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code - Generate Q&A pair": {
      "main": [
        [
          {
            "node": "Code - Smart chunking",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Code - Generate embedding",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code - Generate embedding": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "Code - Prepare qdrant query",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code - Prepare qdrant query": {
      "main": [
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request2": {
      "main": [
        [
          {
            "node": "Code - Build strict context",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code - Build strict context": {
      "main": [
        [
          {
            "node": "HTTP Request3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‚ÄòExecute workflow‚Äô": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Qdrant Vector Store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "84a36fb8-ff6b-4088-9eb4-a332c326ea76",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "a08242ff74e8376953c3c087e01e443ae9d0e59412700c788db014579c27c5a5"
  },
  "id": "2LnZGsjAM7zUkUwT",
  "tags": []
}
